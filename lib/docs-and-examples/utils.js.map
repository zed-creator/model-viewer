{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../src/docs-and-examples/utils.ts"],"names":[],"mappings":"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","sourcesContent":["/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {convertJSONToHTML, createExamplesHeader, createExamplesSidebar, starterSidebar} from './create-html';\nimport {getSidebarCategoryForNewPage, sidebarObserver} from './sidebar';\n\n\n// TODO: Handle going from examples back to docs (old state), possibly\n// include a previous state to revert to in URI\nexport function switchPages(oldLocation: string, newLocation: string) {\n  if (oldLocation !== newLocation) {\n    let URI = '';\n    if (oldLocation === 'docs') {\n      const category = getSidebarCategoryForNewPage();\n      URI = '../examples/'.concat(category);\n    } else {\n      URI = newLocation;\n    }\n    const d = document.createElement('a');\n    d.setAttribute('href', URI);\n    window.location.href = d.href;\n  }\n}\n\nwindow.onscroll = function() {\n  stickyHeader()\n};\n\nfunction stickyHeader() {\n  const headers = document.getElementsByClassName('header');\n  for (let i = 0; i < headers.length; i++) {\n    const header = headers[i] as HTMLElement;\n    const sticky = header.offsetTop;\n    if (window.pageYOffset > sticky) {\n      header.classList.add('sticky');\n    } else {\n      header.classList.remove('sticky');\n    }\n  }\n}\n\ninterface JSONCallback {\n  (response: string): void\n}\n\nfunction loadJSON(filePath: string, callback: JSONCallback) {\n  const xobj = new XMLHttpRequest();\n  xobj.overrideMimeType('application/json');\n  xobj.open('GET', filePath, true);\n  xobj.onreadystatechange = function() {\n    if (xobj.readyState === 4 && xobj.status === 200) {\n      callback(xobj.responseText);\n    }\n  };\n  xobj.send(null);\n}\n\n/*\n * On a page load if # is given, jump to section\n */\nfunction jumpToSection() {\n  const windowHref = window.location.href;\n  const hashtagIndex = windowHref.indexOf('#');\n  if (hashtagIndex >= 0 && windowHref.length > hashtagIndex) {\n    const jumpToId = windowHref.slice(hashtagIndex + 1);\n    const element = document.getElementById(jumpToId);\n    if (element) {\n      const fakeA = document.createElement('a');\n      fakeA.href = '#'.concat(jumpToId);\n      fakeA.click();\n    }\n  }\n}\n\nexport function initFooterLinks() {\n  const footerLinks = document.getElementById('footer-links');\n  footerLinks!.innerHTML = `\n<div>\n  <a href=\"https://github.com/google/model-viewer\">Github</a> ∙ <a href=\"https://model-viewer.glitch.me/\">Glitch</a> ∙ <a href=\"https://github.com/google/model-viewer/issues\">Bug report</a> ∙ <a href=\"https://policies.google.com/privacy\">Privacy</a>\n</div>`;\n}\n\n/* Load the JSON asynchronously, then generate the sidebarObserver after all the\n * documentation in the window.\n * docsOrExample: 'docs' or 'examples-${category}'\n */\nexport function init(docsOrExample: string) {\n  const filePath = docsOrExample === 'docs' ? '../data/docs.json' :\n                                              '../../data/examples.json';\n  loadJSON(filePath, function(response: string) {\n    const json = JSON.parse(response);\n    starterSidebar(docsOrExample);\n    if (docsOrExample === 'docs') {\n      convertJSONToHTML(json);\n    } else {\n      createExamplesSidebar(json);\n      createExamplesHeader();\n    }\n    sidebarObserver(docsOrExample);\n    jumpToSection();\n  });\n}\n\nexport function toggleSidebar() {\n  const root = document.documentElement;\n  const nav = document.getElementById('sidenav')!;\n  if (nav.offsetWidth > 150) {\n    root.style.setProperty('--sidebar-width', '0px');\n    root.style.setProperty('--neg-sidebar-width', '-300px');\n  } else {\n    root.style.setProperty('--sidebar-width', '300px');\n    root.style.setProperty('--neg-sidebar-width', '0px');\n  }\n}\n\n(self as any).toggleSidebar = toggleSidebar;\n(self as any).switchPages = switchPages;\n(self as any).init = init;\n(self as any).initFooterLinks = initFooterLinks;\n\nfunction handleSideBarClickToggle(event: any) {\n  const nav = document.getElementById('sidenav')!;\n  var mouseClickWidth = event.clientX;\n  // toggle nav when clicking outside of nav on small device\n  if (nav && mouseClickWidth > nav.offsetWidth && nav.offsetWidth > 150 &&\n      window.innerWidth <= 800) {\n    toggleSidebar();\n  }\n}\n\ndocument.addEventListener('click', handleSideBarClickToggle);"]}